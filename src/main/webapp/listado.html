<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"></html>
<!-- <html lang=”es” xmlns:th=http://www.thymeleaf.org xmlns:th="http://www.w3.org/1999/xhtml"></html> -->
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Productos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.lineicons.com/3.0/lineicons.css"> 

</head>

<body>

    <nav th:replace="navegacion::nav_bar" ></nav>
    <div th:replace="alertas::several_alerts">  </div>
 
    <table class="table container">
        <thead class="thead-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Codigo</th>
            <th scope="col">Titulo</th>
            <th scope="col">Precio</th>
            <th scope="col">Fecha</th>
            <th scope="col">Autor</th>
            <th scope="col">Imagen</th>
            <th scope="col">Acciones</th>

          </tr>
        </thead>
        <tbody>
          <tr th:each ="p :${productos}">
            <th scope="row" th:text=${p.id} ></th>
            <td th:text=${p.codigo}></td>
            <td th:text=${p.titulo}></td>
            <td th:text=${p.precio}></td>
            <td th:text=${p.fechaAlta}></td>
            <td th:text=${p.autor}></td>
            <td th:text=${p.img}></td>
            <td><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#borrarModal" th:onclick="'delProducto(\'' + ${p.id} + '\');'"  > <i class="lni lni-trash-can"> </i> </button>
              <button type="button" class="btn btn-success" data-toggle="modal" data-target="#actualizaModal" th:onclick="'upProducto(\'' + ${p.id} + '\' ,  \'' + ${p.codigo} + '\',  \'' + ${p.titulo} + '\',  \'' + ${p.precio} + '\',  \'' + ${p.autor} + '\',  \'' + ${p.img} + '\',  \'' + ${p.fechaAlta} + '\');'" 
              > <i class="lni lni-remove-file"> </i> </button>
              
          </tr>
         
        </tbody>
      </table>

      


      <div th:insert="modalBorrar::modal_borrar"></div>


      <div th:insert="modificaModal::modal_actualiza"></div>


      <script th:inline="javascript">

        function delProducto(id) {

          document.getElementById('idProducto').innerHTML= "Confirma borrar id: " + id  ;
          document.getElementById('idBorrar').value = id;
        }

        
        function upProducto(id,codigo, titulo, precio, autor, img, fecha){
          
          //document.getElementById('xxx').innerHTML = id;
          
          document.getElementById('inputId').value = id;
          document.getElementById('inputCodigo').value = codigo;
          document.getElementById('inputTitulo').value = titulo;
          document.getElementById('inputPrecio').value = precio;
          document.getElementById('inputAutor').value = autor;
          document.getElementById('ifecha').value = fecha;
          document.getElementById('inputImagen').value = img;
                                      
        }



    	</script>

      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


</body>
</html>